(this["webpackJsonptest1-soc-net"]=this["webpackJsonptest1-soc-net"]||[]).push([[0],{21:function(e,t,n){e.exports={wrapper:"Authorization_wrapper__1e9Yd",formItem:"Authorization_formItem__1ctss"}},28:function(e,t,n){e.exports={wrapper:"News_wrapper__HiQYN",btn:"News_btn__rM9y2"}},39:function(e,t,n){},40:function(e,t,n){},47:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),c=n(22),i=n.n(c),s=(n(39),n(40),n(3)),u=n(12),o=n(10),d=n(20),p=n(16),l=n.n(p),h=n(19),b=n(13),f="https://test1-soc-net/",j={status:200,headers:{},request:{},config:{}},m={userName:"Sergio",userId:"#4545777666",email:"test@mail.good",password:"test999"},O="aaaaaaa.bbbbbbb.ccccccc",g=function(e,t){return new Promise((function(n,r){setTimeout((function(){switch(e){case f+"auth/login":t.email===m.email&&t.password===m.password?n(Object(b.a)(Object(b.a)({},j),{},{data:{token:O,userName:m.userName,userId:m.userId,resultCode:0}})):r({message:"Check email or password",resultCode:1});break;case f+"auth/me":t.token===O&&n(Object(b.a)(Object(b.a)({},j),{},{data:{userName:m.userName,userId:m.userId,resultCode:0}}));break;default:r({message:"Error: check if URL is correct",resultCode:1})}}),v(500,1500))}))},x=function(e){return new Promise((function(t,n){setTimeout((function(){switch(e){case f+"auth/me":t(Object(b.a)(Object(b.a)({},j),{},{data:{resultCode:0}}));break;default:n({message:"Error: check if URL is correct",resultCode:1})}}),v(500,1500))}))},v=function(e,t){return Math.floor(Math.random()*(t-e+1)+e)},I=function(e){return g(f+"auth/login",Object(b.a)({},e)).then((function(e){return e.data}))},w=function(){return x(f+"auth/me").then((function(e){return e.data}))},N=function(e){return g(f+"auth/me",e).then((function(e){return e.data}))};function A(e,t){var n=e+"="+escape(t);document.cookie=n}function k(e){var t=new Date;t.setTime(t.getTime()-1),document.cookie=e+="=; expires="+t.toUTCString()}function C(e){var t=document.cookie.match("(^|;) ?"+e+"=([^;]*)(;|$)");return t?unescape(t[2]):null}var F=Object(u.b)("auth/login",function(){var e=Object(h.a)(l.a.mark((function e(t,n){var r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.dispatch(U({isFetching:!0})),e.prev=1,e.next=4,I(t);case 4:return A("token",(r=e.sent).token),n.dispatch(U({isFetching:!1})),e.abrupt("return",r);case 10:return e.prev=10,e.t0=e.catch(1),n.dispatch(U({isFetching:!1})),e.abrupt("return",n.rejectWithValue(e.t0));case 14:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(t,n){return e.apply(this,arguments)}}()),y=Object(u.b)("auth/logout",function(){var e=Object(h.a)(l.a.mark((function e(t,n){var r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.dispatch(U({isFetching:!0})),e.prev=1,e.next=4,w();case 4:return 0===(r=e.sent).resultCode&&k("token"),n.dispatch(U({isFetching:!1})),e.abrupt("return",r);case 10:return e.prev=10,e.t0=e.catch(1),n.dispatch(U({isFetching:!1})),e.abrupt("return",n.rejectWithValue(e.t0));case 14:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(t,n){return e.apply(this,arguments)}}()),S=Object(u.c)({name:"auth",initialState:{isAuth:!1,userName:null,userId:null},reducers:{setIsAuth:function(e,t){e.isAuth=t.payload.isAuth}},extraReducers:function(e){e.addCase(F.fulfilled,(function(e,t){e.userName=t.payload.userName,e.userId=t.payload.userId,e.isAuth=!e.isAuth})).addCase(F.rejected,(function(e,t){alert(t.payload.message)})).addCase(y.fulfilled,(function(e){e.isAuth=!1,e.userId=null,e.userName=null}))}}),T=S.actions.setIsAuth,_=S.reducer,z=Object(u.b)("app/initializeApp",function(){var e=Object(h.a)(l.a.mark((function e(t,n){var r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!(r=C("token"))){e.next=17;break}return n.dispatch(U({isFetching:!0})),e.next=6,N({token:r});case 6:if(0!==e.sent.resultCode){e.next=13;break}return n.dispatch(T({isAuth:!0})),n.dispatch(U({isFetching:!1})),e.abrupt("return",{isAppInitialized:!0});case 13:return n.dispatch(U({isFetching:!1})),e.abrupt("return",{isAppInitialized:!0});case 15:e.next=19;break;case 17:return n.dispatch(U({isFetching:!1})),e.abrupt("return",{isAppInitialized:!0});case 19:e.next=25;break;case 21:return e.prev=21,e.t0=e.catch(0),n.dispatch(U({isFetching:!1})),e.abrupt("return",n.rejectWithValue(e.t0));case 25:case"end":return e.stop()}}),e,null,[[0,21]])})));return function(t,n){return e.apply(this,arguments)}}()),E=Object(u.c)({name:"app",initialState:{isAppInitialized:!1,isFetching:!1},reducers:{setIsFetching:function(e,t){e.isFetching=t.payload.isFetching}},extraReducers:function(e){e.addCase(z.fulfilled,(function(e,t){e.isAppInitialized=t.payload.isAppInitialized}))}}),R=E.reducer,U=E.actions.setIsFetching,W=Object(o.b)({auth:_,app:R}),L=Object(u.a)({reducer:W}),H=function(){return Object(d.b)()},M=d.c,P=n(28),V=n.n(P),D=n(1),Z=function(){var e=M((function(e){return e.auth.isAuth})),t=H();return e?Object(D.jsx)("div",{className:V.a.wrapper,children:Object(D.jsx)("button",{className:V.a.btn,onClick:function(){return t(y())},children:"Logout"})}):Object(D.jsx)(s.a,{to:Q.AUTHORIZATION})},B=n(34),J=n(21),Y=n.n(J),q=function(){var e=H(),t=M((function(e){return e.auth.isAuth})),n=Object(B.a)({initialValues:{email:"test@mail.good",password:"test999"},onSubmit:function(t){e(F(t))}});return t?Object(D.jsx)(s.a,{to:Q.NEWS}):Object(D.jsx)("div",{children:Object(D.jsxs)("form",{onSubmit:n.handleSubmit,className:Y.a.wrapper,children:[Object(D.jsx)("input",{name:"email",className:Y.a.formItem,placeholder:"Enter your email",type:"text",onChange:n.handleChange,value:n.values.email}),Object(D.jsx)("input",{name:"password",className:Y.a.formItem,placeholder:"Enter your password",type:"password",onChange:n.handleChange,value:n.values.password}),Object(D.jsx)("button",{className:Y.a.formItem,type:"submit",children:"Sign in"})]})})},Q={AUTHORIZATION:"/authorization",NEWS:"/news",NOT_FOUND:"/404"},$=function(){return Object(D.jsx)("div",{children:Object(D.jsxs)(s.d,{children:[Object(D.jsx)(s.b,{exact:!0,path:"/",render:function(){return Object(D.jsx)(s.a,{to:Q.NEWS})}}),Object(D.jsx)(s.b,{path:Q.AUTHORIZATION,render:function(){return Object(D.jsx)(q,{})}}),Object(D.jsx)(s.b,{path:Q.NEWS,render:function(){return Object(D.jsx)(Z,{})}})]})})},G=n(18);var K=function(){var e=M((function(e){return e.app.isAppInitialized})),t=M((function(e){return e.app.isFetching})),n=H();return Object(r.useEffect)((function(){e||n(z())}),[]),t?Object(D.jsx)("div",{className:"preloader",children:"Loading..."}):Object(D.jsx)(G.a,{children:Object(D.jsx)("div",{className:"App",children:Object(D.jsx)($,{})})})},X=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,48)).then((function(t){var n=t.getCLS,r=t.getFID,a=t.getFCP,c=t.getLCP,i=t.getTTFB;n(e),r(e),a(e),c(e),i(e)}))};i.a.render(Object(D.jsx)(a.a.StrictMode,{children:Object(D.jsx)(d.a,{store:L,children:Object(D.jsx)(K,{})})}),document.getElementById("root")),X()}},[[47,1,2]]]);
//# sourceMappingURL=main.5129f695.chunk.js.map